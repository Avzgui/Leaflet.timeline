!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=function(){function t(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(l){r=!0,s=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=i(1),a=n(s);i(2),L.TimelineVersion="1.0.0",L.Timeline=L.GeoJSON.extend({includes:L.Mixin.Events,times:[],displayedLayers:[],ranges:[],options:{position:"bottomleft",formatDate:function(){return""},enablePlayback:!0,enableKeyboardControls:!1,steps:1e3,duration:1e3,showTicks:!0,waitToUpdateMap:!1},initialize:function(t,e){this.times=[],L.GeoJSON.prototype.initialize.call(this,void 0,e),L.extend(this.options,e),this.ranges=new a["default"],e.intervalFromFeature&&(this._intervalFromFeature=e.intervalFromFeature.bind(this)),e.addData&&(this.addData=e.addData.bind(this)),e.doSetTime&&(this.doSetTime=e.doSetTime.bind(this)),t&&this._process(t)},_intervalFromFeature:function(t){return{start:new Date(t.properties.start).getTime(),end:new Date(t.properties.end).getTime()}},_process:function(t){var e=this,i=1/0,n=-(1/0);t.features.forEach(function(t){var r=e._intervalFromFeature(t);e.ranges.insert(r.start,r.end,t),e.times.push(r.start),e.times.push(r.end),i=Math.min(i,r.start),n=Math.max(n,r.end)}),this.options.start=this.options.start||i,this.options.end=this.options.end||n,this.times=this.times.sort(function(t,e){return t-e}).reduce(function(t,e){return t[t.length-1]!==e&&t.push(e),t},[])},addData:function(t){var e=L.Util.isArray(t)?t:t.features;e?e.filter(function(t){return t.geometries||t.geometry||t.features||t.coordinates}).forEach(this.addData.bind(this)):this._addData(t)},_addData:function(t){if(!this.options.filter||this.options.filter(t)){var e=/^(\d+)(\.(\d+))?(\.(\d+))?(-(.*))?(\+(.*))?$/,i=e.exec(L.version),n=r(i,4),s=n[1],a=n[3],o=L.GeoJSON.geometryToLayer(t,0===parseInt(s,10)&&parseInt(a,10)<=7?this.options.pointToLayer:this.options);this.displayedLayers.push({layer:o,geoJSON:t}),o.feature=L.GeoJSON.asFeature(t),o.defaultOptions=o.options,this.resetStyle(o),this.options.onEachFeature&&this.options.onEachFeature(t,o),this.addLayer(o)}},removeLayer:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];L.GeoJSON.prototype.removeLayer.call(this,t),e&&(this.displayedLayers=this.displayedLayers.filter(function(e){return e.layer!==t}))},setTime:function(t){this.time=new Date(t).getTime(),this.doSetTime(t),this.fire("change")},doSetTime:function(t){var e=this.ranges.lookup(t),i=void 0,n=void 0,r=void 0;for(i=0;i<this.displayedLayers.length;i++){for(r=!1,n=0;n<e.length;n++)if(this.displayedLayers[i].geoJSON===e[n]){r=!0,e.splice(n,1);break}if(!r){var s=this.displayedLayers.splice(i--,1);this.removeLayer(s[0].layer,!1)}}e.forEach(this.addData.bind(this))},onAdd:function(t){L.GeoJSON.prototype.onAdd.call(this,t),this.timeSliderControl=L.Timeline.timeSliderControl(this),this.timeSliderControl.addTo(t)},onRemove:function(t){L.GeoJSON.prototype.onRemove.call(this,t),this.timeSliderControl.removeFrom(t)},getDisplayed:function(){return this.ranges.lookup(this.time)}}),L.Timeline.TimeSliderControl=L.Control.extend({initialize:function(t){this.timeline=t,this.options.position=t.options.position,this.start=t.options.start,this.end=t.options.end,this.showTicks=t.options.showTicks,this.stepDuration=t.options.duration/t.options.steps,this.stepSize=(this.end-this.start)/t.options.steps},_buildDataList:function(t,e){this._datalist=L.DomUtil.create("datalist","",t);var i=L.DomUtil.create("select","",this._datalist);e.forEach(function(t){L.DomUtil.create("option","",i).value=t});var n=Math.floor(1e6*Math.random());this._datalist.id="timeline-datalist-"+n,this._timeSlider.setAttribute("list",this._datalist.id)},_makeButton:function(t,e,i){var n=this,r=L.DomUtil.create("button",e,t);return r.addEventListener("click",function(){return n[i]()}),L.DomEvent.disableClickPropagation(r),r},_makeControls:function(t){this._prevButton=this._makeButton(t,"prev","_prev"),this._playButton=this._makeButton(t,"play","_play"),this._pauseButton=this._makeButton(t,"pause","_pause"),this._nextButton=this._makeButton(t,"next","_next")},_makeSlider:function(t){var e=this,i=L.DomUtil.create("input","time-slider",t);i.type="range",i.min=this.start,i.max=this.end,i.value=this.start,i.addEventListener("input change",function(){return e._sliderChanged()}),i.addEventListener("mousedown",function(){return e.map.dragging.disable()}),document.addEventListener("mouseup",function(){return e.map.dragging.enable()}),this._timeSlider=i},_makeOutput:function(t){this._output=L.DomUtil.create("output","time-text",t),this._output.innerHTML=this.timeline.options.formatDate(new Date(this.start))},_addKeyListeners:function(){this._listener=this._onKeydown.bind(this),document.addEventListener("keydown",this._listener)},_removeKeyListeners:function(){document.removeEventListener("keydown",this._listener)},_onKeydown:function(t){switch(t.keyCode||t.which){case 37:this._prev();break;case 39:this._next();break;case 32:this._toggle();break;default:return}t.preventDefault()},_nearestEventTime:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=!1,n=this.timeline.times[0],r=!0,s=!1,a=void 0;try{for(var o,l=this.timeline.times[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var h=o.value;if(i)return h;if(h>=t){if(-1===e)return n;if(1!==e){var u=Math.abs(t-n),d=Math.abs(t-h);return d>u?n:h}if(h!==t)return h;i=!0}n=h}}catch(m){s=!0,a=m}finally{try{!r&&l["return"]&&l["return"]()}finally{if(s)throw a}}return n},_toggle:function(){this._playing?this._pause():this._play()},_prev:function(){this._pause();var t=this._nearestEventTime(this.timeline.time,-1);this._timeSlider.value=t,this._sliderChanged({type:"change",target:{value:t}})},_pause:function(){clearTimeout(this._timer),this._playing=!1,this.container.classList.remove("playing")},_play:function(){var t=this;clearTimeout(this._timer),parseInt(this._timeSlider.value,10)===this.end&&(this._timeSlider.value=this.start),this._timeSlider.value=parseInt(this._timeSlider.value,10)+this.stepSize,this._sliderChanged({type:"change",target:{value:this._timeSlider.value}}),parseInt(this._timeSlider.value,10)===this.end?(this._playing=!1,this.container.classList.remove("playing")):(this._playing=!0,this.container.classList.add("playing"),this._timer=setTimeout(function(){return t._play()},this.stepDuration))},_next:function(){this._pause();var t=this._nearestEventTime(this.timeline.time,1);this._timeSlider.value=t,this._sliderChanged({type:"change",target:{value:t}})},_sliderChanged:function(t){var e=parseInt(t.target.value,10);this.timeline.options.waitToUpdateMap&&"change"!==t.type||this.timeline.setTime(e),this._output.innerHTML=this.timeline.options.formatDate(new Date(e))},onAdd:function(t){this.map=t;var e=L.DomUtil.create("div","leaflet-control-layers leaflet-control-layers-expanded leaflet-timeline-controls"),i=void 0;if(this.timeline.options.enablePlayback){i=L.DomUtil.create("div","sldr-ctrl-container",e);var n=L.DomUtil.create("div","button-container",i);this._makeControls(n),this.timeline.options.enableKeyboardControls&&this._addKeyListeners()}return this._makeSlider(e),this._makeOutput(i),this.showTicks&&this._buildDataList(e,this.timeline.times),this.timeline.setTime(this.start),this.container=e,e},onRemove:function(){this.timeline.options.enableKeyboardControls&&this._removeKeyListeners()}}),L.timeline=function(t,e){return new L.Timeline(t,e)},L.Timeline.timeSliderControl=function(t,e,i,n){return new L.Timeline.TimeSliderControl(t,e,i,n)}},function(t,e){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=function o(t,e,i,r){n(this,o),this.low=t,this.high=e,this.max=e,this.data=i,this.left=null,this.right=null,this.parent=r},a=function(){function t(){n(this,t),this._root=null,this.size=0}return r(t,[{key:"_insert",value:function(t,e,i,n,r,a){var o=void 0;if(null===n)o=new s(t,e,i,r),null===r?this._root=o:r[a]=o;else{var l=t<n.low||t===n.low&&e<n.high?"left":"right";o=this._insert(t,e,i,n[l],n,l),n.max=Math.max(n.max,o.max)}return o}},{key:"insert",value:function(t,e,i){this._insert(t,e,i,this._root,this._root),this.size++}},{key:"lookup",value:function(t){var e=[],n=this._root;return 2===arguments.length&&(n=arguments[1]),null===n||n.max<t?e:(e.push.apply(e,i(this.lookup(t,n.left))),n.low<=t&&(n.high>=t&&e.push(n.data),e.push.apply(e,i(this.lookup(t,n.right)))),e)}}]),t}();e["default"]=a},function(t,e){}]);